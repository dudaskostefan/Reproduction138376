{"dependencies":[{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":361,"column":0,"index":10218}}],"key":"EU+qeBIKi4KcIzPeK4PbkLqFqVY="}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":361,"column":0,"index":10218}}],"key":"ohGilxjVqjyE1GooDVDt9OYg9x0="}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":361,"column":0,"index":10218}}],"key":"V6GYoXnblvuuGHJNMy7MHyaunsU="}},{"name":"invariant","data":{"asyncType":null,"locs":[{"start":{"line":15,"column":18,"index":311},"end":{"line":15,"column":38,"index":331}}],"key":"Fzi/BpZws2YooIGJ9b6u0HJtuks="}}],"output":[{"data":{"code":"__d((function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),s=r(d[2]),o=r(d[3]),l=(function(){return s((function t(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{viewAreaCoveragePercentThreshold:0};n(this,t),this._hasInteracted=!1,this._timers=new Set,this._viewableIndices=[],this._viewableItems=new Map,this._config=s}),[{key:\"dispose\",value:function(){this._timers.forEach(clearTimeout)}},{key:\"computeViewableItems\",value:function(t,n,s,l,h){var u=t.getItemCount(t.data),v=this._config,f=v.itemVisiblePercentThreshold,_=v.viewAreaCoveragePercentThreshold,w=null!=_,I=w?_:f;o(null!=I&&null!=f!=(null!=_),'Must set exactly one of itemVisiblePercentThreshold or viewAreaCoveragePercentThreshold');var b=[];if(0===u)return b;var y=-1,p=h||{first:0,last:u-1},T=p.first,k=p.last;if(k>=u)return console.warn('Invalid render range computing viewability '+JSON.stringify({renderRange:h,itemCount:u})),[];for(var V=T;V<=k;V++){var C=l(V,t);if(C){var M=C.offset-n,P=M+C.length;if(M<s&&P>0)y=V,c(w,I,M,P,s,C.length)&&b.push(V);else if(y>=0)break}}return b}},{key:\"onUpdate\",value:function(t,n,s,o,l,c,h){var u=this,v=t.getItemCount(t.data);if((!this._config.waitForInteraction||this._hasInteracted)&&0!==v&&o(0,t)){var f=[];if(v&&(f=this.computeViewableItems(t,n,s,o,h)),this._viewableIndices.length!==f.length||!this._viewableIndices.every((function(t,n){return t===f[n]})))if(this._viewableIndices=f,this._config.minimumViewTime){var _=setTimeout((function(){u._timers.delete(_),u._onUpdateSync(t,f,c,l)}),this._config.minimumViewTime);this._timers.add(_)}else this._onUpdateSync(t,f,c,l)}}},{key:\"resetViewableIndices\",value:function(){this._viewableIndices=[]}},{key:\"recordInteraction\",value:function(){this._hasInteracted=!0}},{key:\"_onUpdateSync\",value:function(n,s,o,l){var c=this;s=s.filter((function(t){return c._viewableIndices.includes(t)}));var h=this._viewableItems,u=new Map(s.map((function(t){var s=l(t,!0,n);return[s.key,s]}))),v=[];for(var f of u){var _=t(f,2),w=_[0],I=_[1];h.has(w)||v.push(I)}for(var b of h){var y=t(b,2),p=y[0],T=y[1];u.has(p)||v.push(Object.assign({},T,{isViewable:!1}))}v.length>0&&(this._viewableItems=u,o({viewableItems:Array.from(u.values()),changed:v,viewabilityConfig:this._config}))}}])})();function c(t,n,s,o,l,c){if(u(s,o,l))return!0;var v=h(s,o,l);return 100*(t?v/l:v/c)>=n}function h(t,n,s){var o=Math.min(n,s)-Math.max(t,0);return Math.max(0,o)}function u(t,n,s){return t>=0&&n<=s&&n>t}m.exports=l}));","lineCount":1,"map":[[1,29,11,0],[1,42,11,13],[1,46,11,13,"_slicedToArray"],[1,48,11,13,"r"],[1,50,11,13,"d"],[1,52,11,13],[1,56,11,13,"_classCallCheck"],[1,58,11,13,"r"],[1,60,11,13,"d"],[1,62,11,13],[1,66,11,13,"_createClass"],[1,68,11,13,"r"],[1,70,11,13,"d"],[1,72,11,13],[1,76,15,6,"invariant"],[1,78,15,18,"require"],[1,80,15,25,"d"],[1,82,15,25],[1,86,77,6,"ViewabilityHelper"],[1,89,77,23],[1,100,90,2],[1,107,90,2,"_createClass"],[1,110,84,2],[1,119,84,2,"ViewabilityHelper"],[1,123,86,4],[1,127,85,4,"config"],[1,129,85,29,"arguments"],[1,139,85,29,"length"],[1,146,85,29],[1,154,85,29,"undefined"],[1,158,85,29,"arguments"],[1,168,85,29],[1,171,85,29,"arguments"],[1,181,85,29],[1,184,85,32],[1,185,85,33,"viewAreaCoveragePercentThreshold"],[1,218,85,67],[1,221,85,69,"_classCallCheck"],[1,223,85,69,"this"],[1,228,85,69,"ViewabilityHelper"],[1,231,85,69,"this"],[1,236,79,2,"_hasInteracted"],[1,252,79,28],[1,254,79,33,"this"],[1,259,80,2,"_timers"],[1,267,80,25],[1,271,80,29,"Set"],[1,275,80,34,"this"],[1,280,81,2,"_viewableIndices"],[1,297,81,36],[1,300,81,38,"this"],[1,305,82,2,"_viewableItems"],[1,320,82,43],[1,324,82,47,"Map"],[1,328,87,4,"this"],[1,333,87,9,"_config"],[1,341,87,19,"config"],[1,342,88,2],[1,345,90,2],[1,347,90,2,"key"],[1,351,90,2],[1,361,90,2,"value"],[1,367,93,2],[1,378,97,4,"this"],[1,383,97,9,"_timers"],[1,391,97,17,"forEach"],[1,399,97,25,"clearTimeout"],[1,412,98,2],[1,415,100,2],[1,416,100,2,"key"],[1,420,100,2],[1,443,100,2,"value"],[1,449,103,2],[1,458,104,4,"props"],[1,460,105,4,"scrollOffset"],[1,462,106,4,"viewportHeight"],[1,464,107,4,"getFrameMetrics"],[1,466,116,4,"renderRange"],[1,469,122,4],[1,473,122,10,"itemCount"],[1,475,122,22,"props"],[1,477,122,28,"getItemCount"],[1,490,122,41,"props"],[1,492,122,47,"data"],[1,498,123,4,"_this$_config"],[1,500,124,6,"this"],[1,505,124,11,"_config"],[1,513,123,11,"itemVisiblePercentThreshold"],[1,515,123,38,"_this$_config"],[1,517,123,11,"itemVisiblePercentThreshold"],[1,545,123,40,"viewAreaCoveragePercentThreshold"],[1,547,123,72,"_this$_config"],[1,549,123,40,"viewAreaCoveragePercentThreshold"],[1,582,125,10,"viewAreaMode"],[1,584,125,61],[1,590,125,25,"viewAreaCoveragePercentThreshold"],[1,592,126,10,"viewablePercentThreshold"],[1,594,126,37,"viewAreaMode"],[1,596,127,8,"viewAreaCoveragePercentThreshold"],[1,598,128,8,"itemVisiblePercentThreshold"],[1,600,129,4,"invariant"],[1,602,130,34],[1,608,130,6,"viewablePercentThreshold"],[1,611,131,40],[1,617,131,9,"itemVisiblePercentThreshold"],[1,621,132,47],[1,627,132,11,"viewAreaCoveragePercentThreshold"],[1,630,133,6],[1,721,135,4],[1,725,135,10,"viewableIndices"],[1,727,135,28],[1,730,136,4],[1,733,136,22],[1,737,136,8,"itemCount"],[1,739,137,6],[1,746,137,13,"viewableIndices"],[1,748,139,4],[1,752,139,8,"firstVisible"],[1,755,139,20],[1,757,140,4,"_ref"],[1,759,140,26,"renderRange"],[1,762,140,41],[1,763,140,42,"first"],[1,769,140,49],[1,771,140,52,"last"],[1,776,140,58,"itemCount"],[1,778,140,70],[1,781,140,11,"first"],[1,783,140,16,"_ref"],[1,785,140,11,"first"],[1,791,140,18,"last"],[1,793,140,22,"_ref"],[1,795,140,18,"last"],[1,800,141,4],[1,803,141,8,"last"],[1,806,141,16,"itemCount"],[1,808,146,6],[1,815,142,6,"console"],[1,823,142,14,"warn"],[1,828,143,8],[1,874,144,10,"JSON"],[1,879,144,15,"stringify"],[1,889,144,25],[1,890,144,26,"renderRange"],[1,904,144,39,"itemCount"],[1,919,146,13],[1,922,148,4],[1,926,148,9],[1,930,148,13,"idx"],[1,932,148,19,"first"],[1,934,148,26,"idx"],[1,937,148,33,"last"],[1,939,148,39,"idx"],[1,943,148,46],[1,944,149,6],[1,948,149,12,"metrics"],[1,950,149,22,"getFrameMetrics"],[1,952,149,38,"idx"],[1,954,149,43,"props"],[1,957,150,6],[1,960,150,11,"metrics"],[1,962,150,6],[1,963,153,6],[1,967,153,12,"top"],[1,969,153,18,"metrics"],[1,971,153,26,"offset"],[1,978,153,35,"scrollOffset"],[1,980,154,12,"bottom"],[1,982,154,21,"top"],[1,984,154,27,"metrics"],[1,986,154,35,"length"],[1,993,155,6],[1,996,155,10,"top"],[1,998,155,16,"viewportHeight"],[1,1001,155,34,"bottom"],[1,1003,155,43],[1,1005,156,8,"firstVisible"],[1,1007,156,23,"idx"],[1,1009,158,10,"_isViewable"],[1,1011,159,12,"viewAreaMode"],[1,1013,160,12,"viewablePercentThreshold"],[1,1015,161,12,"top"],[1,1017,162,12,"bottom"],[1,1019,163,12,"viewportHeight"],[1,1021,164,12,"metrics"],[1,1023,164,20,"length"],[1,1032,167,10,"viewableIndices"],[1,1034,167,26,"push"],[1,1039,167,31,"idx"],[1,1047,169,13],[1,1050,169,17,"firstVisible"],[1,1053,169,33],[1,1055,170,8],[1,1060,152,6],[1,1061,172,4],[1,1062,173,4],[1,1069,173,11,"viewableIndices"],[1,1070,174,2],[1,1073,176,2],[1,1074,176,2,"key"],[1,1078,176,2],[1,1089,176,2,"value"],[1,1095,180,2],[1,1104,181,4,"props"],[1,1106,182,4,"scrollOffset"],[1,1108,183,4,"viewportHeight"],[1,1110,184,4,"getFrameMetrics"],[1,1112,192,4,"createViewToken"],[1,1114,197,4,"onViewableItemsChanged"],[1,1116,203,4,"renderRange"],[1,1119,208,10],[1,1123,208,10,"_this"],[1,1125,208,10,"this"],[1,1130,209,10,"itemCount"],[1,1132,209,22,"props"],[1,1134,209,28,"getItemCount"],[1,1147,209,41,"props"],[1,1149,209,47,"data"],[1,1155,210,4],[1,1160,211,7,"this"],[1,1165,211,12,"_config"],[1,1173,211,20,"waitForInteraction"],[1,1193,211,43,"this"],[1,1198,211,48,"_hasInteracted"],[1,1215,212,20],[1,1219,212,6,"itemCount"],[1,1222,213,7,"getFrameMetrics"],[1,1224,213,23],[1,1226,213,26,"props"],[1,1229,210,4],[1,1230,217,4],[1,1234,217,8,"viewableIndices"],[1,1236,217,41],[1,1239,227,4],[1,1242,218,8,"itemCount"],[1,1246,219,6,"viewableIndices"],[1,1248,219,24,"this"],[1,1253,219,29,"computeViewableItems"],[1,1274,220,8,"props"],[1,1276,221,8,"scrollOffset"],[1,1278,222,8,"viewportHeight"],[1,1280,223,8,"getFrameMetrics"],[1,1282,224,8,"renderRange"],[1,1286,228,6,"this"],[1,1291,228,11,"_viewableIndices"],[1,1308,228,28,"length"],[1,1317,228,39,"viewableIndices"],[1,1319,228,55,"length"],[1,1328,229,6,"this"],[1,1333,229,11,"_viewableIndices"],[1,1350,229,28,"every"],[1,1357,229,34],[1,1366,229,35,"v"],[1,1368,229,38,"ii"],[1,1371,229,40],[1,1378,229,45,"v"],[1,1382,229,51,"viewableIndices"],[1,1384,229,67,"ii"],[1,1386,229,70],[1,1390,236,4],[1,1393,235,4,"this"],[1,1398,235,9,"_viewableIndices"],[1,1415,235,28,"viewableIndices"],[1,1417,236,8,"this"],[1,1422,236,13,"_config"],[1,1430,236,21,"minimumViewTime"],[1,1446,236,38],[1,1447,237,6],[1,1451,237,12,"handle"],[1,1453,237,32,"setTimeout"],[1,1465,237,43],[1,1476,241,8,"_this"],[1,1478,241,13,"_timers"],[1,1486,241,21,"delete"],[1,1493,241,28,"handle"],[1,1496,242,8,"_this"],[1,1498,242,13,"_onUpdateSync"],[1,1512,243,10,"props"],[1,1514,244,10,"viewableIndices"],[1,1516,245,10,"onViewableItemsChanged"],[1,1518,246,10,"createViewToken"],[1,1520,248,6],[1,1523,248,9,"this"],[1,1528,248,14,"_config"],[1,1536,248,22,"minimumViewTime"],[1,1553,252,6,"this"],[1,1558,252,11,"_timers"],[1,1566,252,19,"add"],[1,1570,252,23,"handle"],[1,1572,253,4],[1,1578,254,6,"this"],[1,1583,254,11,"_onUpdateSync"],[1,1597,255,8,"props"],[1,1599,256,8,"viewableIndices"],[1,1601,257,8,"onViewableItemsChanged"],[1,1603,258,8,"createViewToken"],[1,1605,216,4],[1,1606,261,2],[1,1609,263,2],[1,1610,263,2,"key"],[1,1614,263,2],[1,1637,263,2,"value"],[1,1643,266,2],[1,1654,267,4,"this"],[1,1659,267,9,"_viewableIndices"],[1,1676,267,28],[1,1678,268,2],[1,1681,270,2],[1,1682,270,2,"key"],[1,1686,270,2],[1,1706,270,2,"value"],[1,1712,273,2],[1,1723,274,4,"this"],[1,1728,274,9,"_hasInteracted"],[1,1744,274,26],[1,1745,275,2],[1,1748,275,3],[1,1749,275,3,"key"],[1,1753,275,3],[1,1769,275,3,"value"],[1,1775,277,2],[1,1784,278,4,"props"],[1,1786,279,4,"viewableIndicesToCheck"],[1,1788,280,4,"onViewableItemsChanged"],[1,1790,285,4,"createViewToken"],[1,1793,290,4],[1,1797,290,4,"_this2"],[1,1799,290,4,"this"],[1,1804,292,4,"viewableIndicesToCheck"],[1,1806,292,29,"viewableIndicesToCheck"],[1,1808,292,52,"filter"],[1,1816,292,59],[1,1825,292,59,"ii"],[1,1828,292,61],[1,1835,293,6,"_this2"],[1,1837,293,11,"_viewableIndices"],[1,1854,293,28,"includes"],[1,1863,293,37,"ii"],[1,1865,293,40],[1,1869,295,4],[1,1873,295,10,"prevItems"],[1,1875,295,22,"this"],[1,1880,295,27,"_viewableItems"],[1,1895,296,10,"nextItems"],[1,1897,296,22],[1,1901,296,26,"Map"],[1,1905,297,6,"viewableIndicesToCheck"],[1,1907,297,29,"map"],[1,1912,297,33],[1,1921,297,33,"ii"],[1,1924,298,8],[1,1928,298,14,"viewable"],[1,1930,298,25,"createViewToken"],[1,1932,298,41,"ii"],[1,1935,298,45],[1,1937,298,51,"props"],[1,1940,299,8],[1,1946,299,15],[1,1947,299,16,"viewable"],[1,1949,299,25,"key"],[1,1953,299,30,"viewable"],[1,1955,300,6],[1,1960,303,10,"changed"],[1,1962,303,20],[1,1965,304,4],[1,1973,304,4,"_ref2"],[1,1978,304,34,"nextItems"],[1,1980,304,45],[1,1985,304,45,"_ref3"],[1,1987,304,45,"_slicedToArray"],[1,1989,304,45,"_ref2"],[1,1991,304,45],[1,1994,304,16,"key"],[1,1996,304,19,"_ref3"],[1,1998,304,19],[1,2001,304,21,"viewable"],[1,2003,304,29,"_ref3"],[1,2005,304,29],[1,2008,305,11,"prevItems"],[1,2010,305,21,"has"],[1,2014,305,25,"key"],[1,2018,306,8,"changed"],[1,2020,306,16,"push"],[1,2025,306,21,"viewable"],[1,2027,308,4],[1,2028,309,4],[1,2036,309,4,"_ref4"],[1,2041,309,34,"prevItems"],[1,2043,309,45],[1,2048,309,45,"_ref5"],[1,2050,309,45,"_slicedToArray"],[1,2052,309,45,"_ref4"],[1,2054,309,45],[1,2057,309,16,"key"],[1,2059,309,19,"_ref5"],[1,2061,309,19],[1,2064,309,21,"viewable"],[1,2066,309,29,"_ref5"],[1,2068,309,29],[1,2071,310,11,"nextItems"],[1,2073,310,21,"has"],[1,2077,310,25,"key"],[1,2081,311,8,"changed"],[1,2083,311,16,"push"],[1,2088,311,20,"Object"],[1,2095,311,20,"assign"],[1,2102,311,20],[1,2105,311,25,"viewable"],[1,2107,311,33],[1,2108,311,35,"isViewable"],[1,2120,311,47],[1,2124,313,4],[1,2125,314,8,"changed"],[1,2127,314,16,"length"],[1,2134,314,25],[1,2138,315,6,"this"],[1,2143,315,11,"_viewableItems"],[1,2158,315,28,"nextItems"],[1,2160,316,6,"onViewableItemsChanged"],[1,2162,316,29],[1,2163,317,8,"viewableItems"],[1,2177,317,23,"Array"],[1,2183,317,29,"from"],[1,2188,317,34,"nextItems"],[1,2190,317,44,"values"],[1,2200,318,8,"changed"],[1,2210,319,8,"viewabilityConfig"],[1,2228,319,27,"this"],[1,2233,319,32,"_config"],[1,2243,322,2],[1,2247,322,3],[1,2249,77,23],[1,2252,325,0],[1,2261,325,9,"_isViewable"],[1,2263,326,2,"viewAreaMode"],[1,2265,327,2,"viewablePercentThreshold"],[1,2267,328,2,"top"],[1,2269,329,2,"bottom"],[1,2271,330,2,"viewportHeight"],[1,2273,331,2,"itemLength"],[1,2276,333,2],[1,2279,333,6,"_isEntirelyVisible"],[1,2281,333,25,"top"],[1,2283,333,30,"bottom"],[1,2285,333,38,"viewportHeight"],[1,2288,334,4],[1,2295,334,11],[1,2297,336,4],[1,2301,336,10,"pixels"],[1,2303,336,19,"_getPixelsVisible"],[1,2305,336,37,"top"],[1,2307,336,42,"bottom"],[1,2309,336,50,"viewportHeight"],[1,2312,339,4],[1,2319,338,6],[1,2324,338,13,"viewAreaMode"],[1,2326,338,28,"pixels"],[1,2328,338,37,"viewportHeight"],[1,2330,338,54,"pixels"],[1,2332,338,63,"itemLength"],[1,2336,339,22,"viewablePercentThreshold"],[1,2337,341,0],[1,2338,343,0],[1,2347,343,9,"_getPixelsVisible"],[1,2349,344,2,"top"],[1,2351,345,2,"bottom"],[1,2353,346,2,"viewportHeight"],[1,2356,348,2],[1,2360,348,8,"visibleHeight"],[1,2362,348,24,"Math"],[1,2367,348,29,"min"],[1,2371,348,33,"bottom"],[1,2373,348,41,"viewportHeight"],[1,2376,348,59,"Math"],[1,2381,348,64,"max"],[1,2385,348,68,"top"],[1,2387,348,73],[1,2390,349,2],[1,2397,349,9,"Math"],[1,2402,349,14,"max"],[1,2406,349,18],[1,2408,349,21,"visibleHeight"],[1,2410,350,0],[1,2411,352,0],[1,2420,352,9,"_isEntirelyVisible"],[1,2422,353,2,"top"],[1,2424,354,2,"bottom"],[1,2426,355,2,"viewportHeight"],[1,2429,357,2],[1,2436,357,9,"top"],[1,2439,357,16],[1,2442,357,21,"bottom"],[1,2445,357,31,"viewportHeight"],[1,2448,357,49,"bottom"],[1,2450,357,58,"top"],[1,2451,358,0],[1,2452,360,0,"module"],[1,2454,360,7,"exports"],[1,2462,360,17,"ViewabilityHelper"],[1,2463,360,35]],"functionMap":{"names":["<global>","ViewabilityHelper","constructor","dispose","computeViewableItems","onUpdate","_viewableIndices.every$argument_0","setTimeout$argument_0","resetViewableIndices","recordInteraction","_onUpdateSync","viewableIndicesToCheck.filter$argument_0","viewableIndicesToCheck.map$argument_0","_isViewable","_getPixelsVisible","_isEntirelyVisible"],"mappings":"AAA;AC4E;ECO;GDI;EEK;GFK;EGK;GHuE;EIM;kCCiD,oCD;2CEQ;OFW;GJa;EOK;GPE;EQK;GRE;ESE;2DCe;wCDC;iCEI;OFG;GTsB;CDC;AaE;CbgB;AcE;CdO;AeE;CfM"}},"type":"js/module"}]}